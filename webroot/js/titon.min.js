/*!
 * Titon Toolkit v1.1.0-alpha
 * Copyright 2010-2013, The Titon Project - http://titon.io
 * BSD-2 - https://github.com/titon/toolkit/blob/master/license.md
 */
!function(a){"use strict";a.Toolkit={version:"1.1.0-alpha",build:"hr8slrbr",options:{vendor:"",isPrefix:"is-",hasPrefix:"has-"},messages:{loading:"Loading...",error:"An error has occurred!"},ie8:!(!a.attachEvent||a.addEventListener),ie9:!(!a.addEventListener||!navigator.userAgent.match(/MSIE/i)),isTouch:!!("ontouchstart"in a)},$.fn.toolkit=function(a){var b,c="toolkit."+a,d=[];return this.each(function(){(b=$(this).data(c))&&d.push(b)}),1===this.length&&d[0]?d[0]:d},$.fn.reveal=function(){return this.removeClass("hide").addClass("show")},$.fn.conceal=function(){return this.removeClass("show").addClass("hide")},$.fn.i=$.fn.item=function(a){var b=this.get(a);return b?$(b):null},$.fn.addData=function(a,b){var c=this.data(a);return c?c:("function"==typeof b&&(b=b.call(this)),this.data(a,b),b)},jQuery.event.special.clickout=function(){function a(a){var c=!0;b.each(function(){if(c){var b=$(this);c=!b.is(a.target)&&0===b.has(a.target).length}}),c&&b.triggerHandler("clickout",[a.target])}var b=$([]),c=$(document);return{setup:function(){b=b.add(this),1===b.length&&c.on("click",a)},teardown:function(){b=b.not(this),0===b.length&&c.off("click",a)},add:function(a){var b=a.handler;a.handler=function(a,c){a.target=c,b.apply(this,arguments)}}}}(),$.fn.clickout=function(a,b){return arguments.length>0?this.on("clickout",null,a,b):this.trigger("clickout")},$.fn.positionTo=function(a,b,c,d){a=a.hyphenate().split("-");var e={y:a[0],x:a[1]},f=c||{left:0,top:0},g=0,h=0,i=this.outerHeight(!0),j=this.outerWidth(!0);if(b.preventDefault)f.left+=b.pageX,f.top+=b.pageY;else{var k=b.offset();f.left+=k.left,f.top+=k.top,g=b.outerHeight(),h=b.outerWidth()}return"top"===e.y?f.top-=i:"bottom"===e.y?f.top+=g:"center"===e.y&&(f.top-=Math.round(i/2-g/2)),"left"===e.x?f.left-=j:"right"===e.x?f.left+=h:"center"===e.x&&(f.left-=Math.round(j/2-h/2)),d&&("center"===e.y&&("left"===e.x?f.left-=15:"right"===e.x&&(f.left+=15)),"center"===e.x&&("top"===e.y?f.top-=10:"bottom"===e.y&&(f.top+=20))),this.css(f)},$.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments;clearTimeout(d),d=setTimeout(function(){d=null,c||a.apply(e,f)},b||150),c&&!d&&a.apply(e,f)}},$.throttle=function(a,b){var c=!1;return function(){var d=this,e=arguments;c||(c=!0,setTimeout(function(){a.apply(d,e),c=!1},b||150))}},$.expr[":"].shown=function(a){return"hidden"!==$(a).css("visibility")},Array.prototype.chunk||(Array.prototype.chunk=function(a){for(var b=this,c=[],d=0,e=b.length;e>d;)c.push(b.slice(d,d+=a));return c}),String.prototype.hyphenate||(String.prototype.hyphenate=function(){return this.replace(/[A-Z]/g,function(a){return"-"+a.charAt(0).toLowerCase()})}),Function.prototype.create||(Function.prototype.create=function(a){return a.prototype=$.extend({},this.prototype),a.prototype.constructor=a,a}),Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=arguments.length>1?[].slice.call(arguments,1):null,d=function(){},e=function(){var f=a,g=arguments.length;this instanceof e&&(d.prototype=b.prototype,f=new d);var h=c||g?b.apply(f,c&&g?c.concat([].slice.call(arguments)):c||arguments):b.call(f);return f===a?h:f};return e})}(window);!function(a){"use strict";Toolkit.Component=function(){};var b=Toolkit.Component.prototype;b.component="Component",b.version="0.0.0",b.enabled=!0,b.createElement=function(b){var c;if(b.templateFrom&&(c=a(b.templateFrom)),c&&c.length||!b.template||(c=a(b.template),c.length&&c.conceal().appendTo("body")),!c)throw new Error("Failed to create template element");return this.setElement(c,b)},b.disable=function(){return this.enabled=!1,this},b.enable=function(){return this.enabled=!0,this},b.fireEvent=function(b,c){a.isArray(c)||(c=[c]);var d="on"+b.charAt(0).toUpperCase()+b.slice(1);if(this.options[d]&&this.options[d].apply(this,c||[]),this.element&&this.element.length){var e=jQuery.Event(b+".toolkit."+this.component.toLowerCase());e.context=this,this.element.trigger(e,c||[])}return this},b.process=function(a){if(this.hide(),a.callback){for(var b=a.callback.split("."),c=window,d=c,e=0;e<b.length;e++)d=c,c=c[b[e]];c.call(d,a)}return this.fireEvent("process",a),this},b.readValue=function(b,c){return c?(b=a(b),"function"===a.type(c)?c.call(this,b):b.attr(c)):null},b.requestData=function(b,c,d,e){var f=b.url||b,g=a.extend({},{url:f,type:"GET",context:this,beforeSend:c||function(){this.cache[f]=!0,this.element.addClass(Toolkit.options.isPrefix+"loading")}},b);"object"===a.type(this.options.ajax)&&(g=a.extend({},this.options.ajax,g));var h="GET"===g.type.toUpperCase();return a.ajax(g).done(d||function(a,b,c){this.element.removeClass(Toolkit.options.isPrefix+"loading"),c.getResponseHeader("Content-Type").indexOf("text/html")>=0?(h&&(this.cache[f]=a),this.position(a)):(delete this.cache[f],this.process(a))}).fail(e||function(){delete this.cache[f],this.element.removeClass(Toolkit.options.isPrefix+"loading").addClass(Toolkit.options.hasPrefix+"failed"),this.position(this._errorTemplate())}),this},b.setElement=function(b,c){return b=a(b),c.template=!1,c.className&&b.addClass(c.className),c.animation&&b.addClass(c.animation),b},b.setOptions=function(b,c){var d=a.extend(!0,{},b||{},c||{});return Toolkit.isTouch&&"hover"===d.mode&&(d.mode="click"),d},b._errorTemplate=function(){return a("<div/>").addClass(Toolkit.options.vendor+this.component.toLowerCase+"-error").text(Toolkit.messages.error)},b._loadingTemplate=function(){return a("<div/>").addClass(Toolkit.options.vendor+this.component.toLowerCase+"-loading").text(Toolkit.messages.loading)}}(jQuery);!function(a){"use strict";Toolkit.Accordion=Toolkit.Component.create(function(a,b){this.component="Accordion",this.version="0.0.0",this.options=this.setOptions(Toolkit.Accordion.options,b),this.element=this.setElement(a,this.options),this.headers=[],this.sections=[],this.previousIndex=0,this.currentIndex=0,this.node=null,this.initialize()}),Toolkit.Accordion.options={mode:"click",defaultIndex:0,multiple:!1,collapsible:!1,headerElement:".accordion-head",contentElement:".accordion-handle"};var b=Toolkit.Accordion.prototype;b.initialize=function(){var b=this.options,c=this.element.find(b.contentElement),d=this.element.find(b.headerElement),e=d.item(0);this.headers=d,this.sections=c,d[b.defaultIndex]&&(e=d[b.defaultIndex]),this.element.children("li").removeClass(Toolkit.options.isPrefix+"active"),d.each(function(b){a(this).data("index",b)}),c.each(function(){var b=a(this);b.data("height",b.height()).conceal()}),d.on("click"===this.options.mode?"click":"mouseover",this.__show.bind(this)),this.fireEvent("init"),this.show(e)},b.jump=function(a){return a>=this.headers.length?a=0:0>a&&(a=this.headers.length-1),this.fireEvent("jump",a),this.show(this.headers[a])},b.show=function(b){b=a(b);var c=this.options,d=b.parent(),e=b.next(c.contentElement),f=b.data("index"),g=parseInt(e.data("height"),10),h=this.node&&this.node.is(b);if("click"===c.mode&&(c.multiple||c.collapsible&&h))e.is(":shown")&&this.node?(e.css("max-height",0).conceal(),d.removeClass(Toolkit.options.isPrefix+"active")):(e.css("max-height",g).reveal(),d.addClass(Toolkit.options.isPrefix+"active"));else{if(h)return this;this.sections.css("max-height",0).conceal(),e.css("max-height",g).reveal(),this.element.children("li").removeClass(Toolkit.options.isPrefix+"active"),d.addClass(Toolkit.options.isPrefix+"active")}return this.previousIndex=this.currentIndex,this.currentIndex=f,this.node=b,this.fireEvent("show",e),this},b.__show=function(a){a.preventDefault(),this.show(a.currentTarget)},a.fn.accordion=function(b){return this.each(function(){a(this).addData("toolkit.accordion",function(){return new Toolkit.Accordion(this,b)})})}}(jQuery);!function(a){"use strict";Toolkit.Blackout=Toolkit.Component.create(function(a){this.component="Blackout",this.version="0.0.0",this.options=this.setOptions(Toolkit.Blackout.options,a),this.element=this.createElement(this.options),this.count=0,this.loader=null,this.message=null,this.initialize()}),Toolkit.Blackout.options={loader:"bar-wave",loaderMessage:Toolkit.messages.loading,waveCount:5,template:'<div class="'+Toolkit.options.vendor+'blackout" id="toolkit-blackout"></div>',templateFrom:"#toolkit-blackout"};var b=Toolkit.Blackout.prototype;b.initialize=function(){var b=this.options,c=Toolkit.options.vendor,d="bubble-spinner"===b.loader?8:b.waveCount;this.loader=a("<div/>").addClass(c+"loader").addClass(b.loader).appendTo(this.element);var e,f="";for(e=0;d>e;e++)f+="<span></span>";"bubble-spinner"===b.loader?a("<div/>").addClass("spinner").html(f).appendTo(this.loader):this.loader.html(f),this.message=a("<div/>").addClass(c+"loader-message").html(b.loaderMessage).appendTo(this.loader),this.fireEvent("init")},b.hide=function(){var a=this.count-1;return 0>=a?(this.count=0,this.element.conceal(),this.hideLoader()):this.count=a,this.fireEvent("hide",0>=a),this},b.hideLoader=function(){return this.loader.conceal(),this},b.show=function(){return this.count++,this.element.reveal(),this.showLoader(),this.fireEvent("show"),this},b.showLoader=function(){return this.loader.reveal(),this};var c=null;Toolkit.Blackout.factory=function(a){return c?c:c=new Toolkit.Blackout(a)}}(jQuery);!function(a){"use strict";Toolkit.Carousel=Toolkit.Component.create(function(a,b){this.component="Carousel",this.version="0.0.0",this.options=this.setOptions(Toolkit.Carousel.options,b),this.element=this.setElement(a,this.options),this.stopped=!1,this.itemsWrapper=null,this.itemsList=null,this.items=[],this.tabsWrapper=null,this.tabs=[],this.prevButton=null,this.nextButton=null,this.previousIndex=0,this.currentIndex=0,this.timer=null,this.initialize()}),Toolkit.Carousel.options={animation:"slide",duration:5e3,autoCycle:!0,stopOnHover:!0,itemsElement:".carousel-items",itemElement:"li",tabsElement:".carousel-tabs",tabElement:"a",nextElement:".carousel-next",prevElement:".carousel-prev"};var b=Toolkit.Carousel.prototype;b.initialize=function(){var b=this.options;if(this.itemsWrapper=this.element.find(b.itemsElement),this.itemsList=this.itemsWrapper.children("ul, ol"),this.items=this.itemsWrapper.find(b.itemElement),this.tabsWrapper=this.element.find(b.tabsElement),this.tabs=this.tabsWrapper.find(b.tabElement),this.nextButton=this.element.find(b.nextElement),this.prevButton=this.element.find(b.prevElement),this.items.length<=1)return this.tabsWrapper.hide(),this.nextButton.hide(),this.prevButton.hide(),void 0;switch(b.animation){case"fade":this.items.item(0).reveal();break;case"slide":this.itemsList.css("width",100*this.items.length+"%"),this.items.css("width",100/this.items.length+"%")}this.tabs.each(function(b){a(this).data("index",b)}),a(window).on("keydown",function(b){switch(a.inArray(b.keyCode,[37,38,39,40])>=0&&b.preventDefault(),b.keyCode){case 37:this.prev();break;case 38:this.jump(0);break;case 39:this.next();break;case 40:this.jump(-1)}}.bind(this)),b.stopOnHover&&this.element.on("mouseenter",this.stop.bind(this)).on("mouseleave",this.start.bind(this)),this.element.on("swipeleft",this.next.bind(this)).on("swiperight",this.prev.bind(this)),this.tabs.on("click",this.__jump.bind(this)),this.nextButton.on("click",this.next.bind(this)),this.prevButton.on("click",this.prev.bind(this)),this.fireEvent("init"),this.start().reset()},b.jump=function(a){switch(a>=this.items.length?a=0:0>a&&(a=this.items.length-1),this.previousIndex=this.currentIndex,this.currentIndex=a,this.tabs.length&&this.tabs.removeClass(Toolkit.options.isPrefix+"active").item(a).addClass(Toolkit.options.isPrefix+"active"),this.options.animation){case"fade":this.items.removeClass("show").item(a).reveal();break;case"slide-up":this.itemsList.css("top",-(100*a)+"%");break;default:this.itemsList.css("left",-(100*a)+"%")}return this.reset(),this.fireEvent("jump",a),this},b.next=function(){return this.jump(this.currentIndex+1),this},b.prev=function(){return this.jump(this.currentIndex-1),this},b.reset=function(){return this.options.autoCycle&&(clearInterval(this.timer),this.timer=setInterval(this.__cycle.bind(this),this.options.duration)),this},b.start=function(){return this.element.removeClass(Toolkit.options.isPrefix+"stopped"),this.stopped=!1,this.fireEvent("start"),this},b.stop=function(){return this.element.addClass(Toolkit.options.isPrefix+"stopped"),this.stopped=!0,this.fireEvent("stop"),this},b.__cycle=function(){this.enabled&&(this.stopped||(this.fireEvent("cycle"),this.next()))},b.__jump=function(b){b.preventDefault(),this.enabled&&this.jump(a(b.target).data("index")||0)},a.fn.carousel=function(b){return this.each(function(){a(this).addData("toolkit.carousel",function(){return new Toolkit.Carousel(this,b)})})}}(jQuery);!function(a){"use strict";Toolkit.Drop=Toolkit.Component.create(function(b,c){this.component="Drop",this.version="0.0.0",this.options=this.setOptions(Toolkit.Drop.options,c),this.node=null,this.nodes=a(b),this.element=null,this.initialize()}),Toolkit.Drop.options={mode:"click",context:null,getTarget:"data-drop",hideOpened:!0};var b=Toolkit.Drop.prototype;b.initialize=function(){var b=["down","up","left","right"].map(function(a){return"."+Toolkit.options.vendor+"drop--"+a});a(this.nodes.selector+", "+b.join(", ")).clickout(this.hide.bind(this)),a(this.options.context||document).on("click"===this.options.mode?"click":"mouseenter",this.nodes.selector,this.__show.bind(this)),this.fireEvent("init")},b.hide=function(){return this.element&&this.element.is(":shown")&&(this.element.conceal(),this.node.removeClass(Toolkit.options.isPrefix+"active"),this.fireEvent("hide")),this},b.show=function(b){return this.element.reveal(),this.node=a(b),this.node.addClass(Toolkit.options.isPrefix+"active"),this.fireEvent("show"),this},b.__show=function(b){if(b.preventDefault(),this.enabled){var c=a(b.target),d=this.readValue(c,this.options.getTarget);d&&"#"===d.substr(0,1)&&(this.options.hideOpened&&this.node&&!this.node.is(c)&&this.hide(),this.element=a(d),this.node=c,this.element.is(":shown")?this.hide():this.show(c))}},a.fn.drop=function(b){var c=new Toolkit.Drop(this,b);return this.each(function(){a(this).addData("toolkit.drop",c)})}}(jQuery);!function(a){"use strict";Toolkit.Flyout=Toolkit.Component.create(function(b,c,d){this.component="Flyout",this.version="0.0.0",this.options=this.setOptions(Toolkit.Flyout.options,d),this.nodes=a(b),this.node=null,this.element=null,this.current=null,this.menus={},this.data=[],this.dataMap={},this.timers={},this.initialize(c)}),Toolkit.Flyout.options={className:"",context:null,mode:"hover",getUrl:"href",xOffset:0,yOffset:0,showDelay:350,hideDelay:1e3,itemLimit:15,contentElement:".flyout",template:'<div class="flyout"></div>'};var b=Toolkit.Flyout.prototype;b.initialize=function(b){if(!b)throw new Error("Flyout URL required to download sitemap JSON");a.getJSON(b,this.load.bind(this));var c=this.options;"hover"===c.mode&&a(c.context||document).on("mouseenter",this.nodes.selector,function(){this.clearTimer("hide").startTimer("show",c.showDelay)}.bind(this)).on("mouseleave",this.nodes.selector,function(){this.clearTimer("show").startTimer("hide",c.showDelay)}.bind(this)),a(c.context||document).on("click"===c.mode?"click":"mouseenter",this.nodes.selector,this.__show.bind(this)),this.fireEvent("init")},b.clearTimer=function(a){return window.clearTimeout(this.timers[a]),delete this.timers[a],this},b.hide=function(){return this.node.removeClass(Toolkit.options.isPrefix+"active"),this.current&&this.isVisible()?(this.menus[this.current].conceal(),this.fireEvent("hide"),this.current=null,this):this},b.isVisible=function(){return this.current&&this.menus[this.current]&&(this.element=this.menus[this.current]),this.element&&this.element.is(":shown")},b.load=function(a,b){if(b=b||0,0===b&&(this.data=a),this.dataMap[a.url]=a,a.children)for(var c=0,d=a.children.length;d>c;c++)this.load(a.children[c],b+1);return this},b.position=function(){var b=this.current,c=this.options;if(!this.menus[b])return this;var d=this.menus[b],e=d.outerHeight(),f=this.node.offset(),g=f.left+c.xOffset,h=f.top+c.yOffset+this.node.outerHeight(),i=a(window).height();return h>i/2&&(h=f.top-c.yOffset-e),d.css({left:g,top:h}).reveal(),this.fireEvent("show"),this},b.show=function(b){var c=this._getTarget(b);return this.current&&c!==this.current&&(this.hide(),this.startTimer("show",this.options.showDelay)),this.node=a(b),this._getMenu()?(this.fireEvent("load",b),this.node.addClass(Toolkit.options.isPrefix+"active"),"click"===this.options.mode&&this.position(),this):this},b.startTimer=function(a,b,c){this.clearTimer(a);var d;return d="show"===a?this.position.bind(this):this.hide.bind(this),d&&(this.timers[a]=window.setTimeout(function(){d.apply(this,c||[])}.bind(this),b)),this},b._buildMenu=function(b,c){if(!c.children||!c.children.length)return null;var d,e,f,g=a(this.options.template),h=[],i=this.options.contentElement,j=this.options.itemLimit;this.options.className&&g.addClass(this.options.className),b.is("body")&&g.addClass(Toolkit.options.isPrefix+"root"),j&&c.children.length>j?h=c.children.chunk(j):h.push(c.children);for(var k,l=0;k=h[l];l++){d=a("<ul/>");for(var m,n=0,o=k.length;o>n;n++)m=k[n],e=a("<li/>"),m.url?(f=a("<a/>",{text:m.title,href:m.url}),a("<span/>").addClass(m.icon||"caret-right").prependTo(f)):(f=a("<span/>",{text:m.title}),e.addClass(Toolkit.options.vendor+"flyout-heading")),m.attributes&&f.attr(m.attributes),m.className&&e.addClass(m.className),e.append(f).appendTo(d),m.children&&m.children.length&&(this._buildMenu(e,m),e.addClass(Toolkit.options.hasPrefix+"children").on("mouseenter",this.__positionChild.bind(this,e)).on("mouseleave",this.__hideChild.bind(this,e)));i?"."===i.substr(0,1)&&g.hasClass(i.substr(1))?g.append(d):g.find(i).append(d):g.append(d)}return g.appendTo(b),g},b._getMenu=function(){var b=this._getTarget();if(this.menus[b])return this.current=b,this.menus[b];if(this.dataMap[b]){var c=this._buildMenu(a("body"),this.dataMap[b]);return c?(c.conceal(),"hover"===this.options.mode&&c.on({mouseenter:function(){this.clearTimer("hide")}.bind(this),mouseleave:function(){this.startTimer("hide",this.options.hideDelay)}.bind(this)}),this.current=b,this.menus[b]=c,this.menus[b]):null}return null},b._getTarget=function(b){return b=a(b||this.node),this.readValue(b,this.options.getUrl)||b.attr("href")},b.__hideChild=function(b){b=a(b),b.removeClass(Toolkit.options.isPrefix+"open"),b.children(this.options.contentElement).removeAttr("style"),this.fireEvent("hideChild",b)},b.__positionChild=function(b){var c=b.children(this.options.contentElement);if(c){var d=c.children();c.css("width",d.outerWidth()*d.length+"px");var e=a(window),f=e.height()+e.scrollTop(),g=e.width(),h=b.offset().top,i=b.outerHeight(),j=b.offset().left+b.outerWidth(),k=j+c.outerWidth();k>=g?c.addClass("push-left"):c.removeClass("push-left"),h>f/2?c.css("top","-"+(c.outerHeight()-i)+"px"):c.css("top",0),b.addClass(Toolkit.options.isPrefix+"open"),this.fireEvent("showChild",b)}},b.__show=function(b){var c=a(b.target),d=this.node&&c[0]===this.node[0];if(this.isVisible()){if(Toolkit.isTouch?d&&"a"===this.node.prop("tagName").toLowerCase()||b.preventDefault():b.preventDefault(),"click"===this.options.mode&&this.hide(),d)return}else b.preventDefault();this.show(c)},a.fn.flyout=function(b,c){var d=new Toolkit.Flyout(this,b,c);return this.each(function(){a(this).addData("toolkit.flyout",d)})}}(jQuery);!function(a){"use strict";Toolkit.Input=Toolkit.Component.create(function(a,b){this.component="Input",this.version="0.0.0",this.options=this.setOptions(Toolkit.Input.options,b),this.element=this.setElement(a,this.options),this.initialize()}),Toolkit.Input.options={checkbox:"input:checkbox",radio:"input:radio",select:"select"};var b=Toolkit.Input.prototype;b.initialize=function(){if(this.element){var a=this.options;a.checkbox&&this.element.find(a.checkbox).checkbox(a),a.radio&&this.element.find(a.radio).radio(a),a.select&&this.element.find(a.select).select(a),this.fireEvent("init")}},b.buildWrapper=function(){var b=a("<div/>").addClass(Toolkit.options.vendor+"custom-input").insertBefore(this.input).append(this.input);return this.options.copyClasses&&this.copyClasses(this.input,b),b},b.copyClasses=function(b,c){var d=(a(b).attr("class")||"").replace(/\binput\b/,"").trim();return d&&a(c).addClass(d),this},Toolkit.Input.Checkbox=Toolkit.Input.create(function(b,c){this.component="Input.Checkbox",this.version="0.0.0",this.options=this.setOptions(Toolkit.Input.Checkbox.options,c),this.input=a(b),this.wrapper=this.buildWrapper(),this.element=this.setElement(a("<label/>").addClass(Toolkit.options.vendor+"checkbox").attr("for",this.input.attr("id")).insertAfter(this.input),this.options),this.fireEvent("init")}),Toolkit.Input.Checkbox.options={copyClasses:!0},Toolkit.Input.Radio=Toolkit.Input.create(function(b,c){this.component="Input.Radio",this.version="0.0.0",this.options=this.setOptions(Toolkit.Input.Radio.options,c),this.input=a(b),this.wrapper=this.buildWrapper(),this.element=this.setElement(a("<label/>").addClass(Toolkit.options.vendor+"radio").attr("for",this.input.attr("id")).insertAfter(this.input),this.options),this.fireEvent("init")}),Toolkit.Input.Radio.options={copyClasses:!0},Toolkit.Input.Select=Toolkit.Input.create(function(b,c){this.component="Input.Select",this.version="0.0.0",this.options=this.setOptions(Toolkit.Input.Select.options,c),this.input=a(b),this.multiple=this.input.prop("multiple"),this.multiple&&this.options.native||(this.wrapper=this.buildWrapper(),this.element=this.buildButton(),this.dropdown=null,this.currentIndex=0,this.initialize())}),Toolkit.Input.Select.options={copyClasses:!0,"native":!1,multipleFormat:"count",countMessage:"{count} of {total} selected",listLimit:3,hideFirst:!1,hideSelected:!1,arrowContent:'<span class="caret-down"></span>',getDefaultLabel:"title",getOptionLabel:"title",getDescription:"data-description"};var c=Toolkit.Input.Select.prototype;c.initialize=function(){this.input.change(this.__change.bind(this)),this.options.native||(this.buildDropdown(),this.input.css("z-index",1).blur(this.hide.bind(this)),this.dropdown.clickout(this.hide.bind(this)),this.element.clickout(this.hide.bind(this)).click(this.__toggle.bind(this))),this.multiple||a(window).keydown(this.__cycle.bind(this)),this.input.change(),this.fireEvent("init")},c.buildButton=function(){var b=Toolkit.options.vendor,c=a("<div/>").addClass(b+"select").append(a("<div/>").addClass(b+"select-arrow").html(this.options.arrowContent)).append(a("<div/>").addClass(b+"select-label").html(Toolkit.options.loadingMessage)).css("min-width",this.input.width()).insertAfter(this.input);return this.multiple&&this.input.css("max-height",c.height()),c},c.buildDropdown=function(){var b=Toolkit.options.vendor,c=this.input,d=this.options,e=this.buildOption.bind(this),f=a("<div/>").addClass(b+"drop--down").addClass(b+"select-options"),g=a("<ul/>"),h=0,i=this;return d.hideSelected&&!d.multiple&&f.addClass("hide-selected"),c.multiple&&f.addClass(Toolkit.options.isPrefix+"multiple"),this.dropdown=f,c.children().each(function(){var c=a(this);if("optgroup"===c.prop("tagName").toLowerCase())g.append(a("<li/>").addClass(b+"drop-heading").text(c.attr("label"))),c.children().each(function(){var b=a(this);c.prop("disabled")&&b.prop("disabled",!0),b.prop("selected")&&(i.currentIndex=h),g.append(e(b,h)),h++});else{if(d.hideFirst&&0===h)return;c.prop("selected")&&(i.currentIndex=h),g.append(e(c,h)),h++}}),this.wrapper.append(f.append(g)),this},c.buildOption=function(b,c){var d,e=this.input,f=this.dropdown,g=Toolkit.options.isPrefix+"active",h=a("<li/>"),i=b.text();b.prop("selected")&&h.addClass(g),(d=this.readValue(b,this.options.getDescription))&&(i+=' <span class="'+Toolkit.options.vendor+'drop-desc">'+d+"</span>");var j=a("<a/>").html(i).attr("href","javascript:;");if(this.options.copyClasses&&this.copyClasses(b,h),h.append(j),b.prop("disabled"))return h.addClass(Toolkit.options.isPrefix+"disabled"),h;if(this.multiple)j.click(function(){b.prop("selected")?(b.prop("selected",!1),a(this).parent().removeClass(g)):(b.prop("selected",!0),a(this).parent().addClass(g)),e.change()});else{var k=this;j.click(function(){f.find("li").removeClass(g),a(this).parent().addClass(g),k.hide(),k.currentIndex=c,e.val(b.val()),e.change()})}return h},c.hide=function(){return this.element.removeClass(Toolkit.options.isPrefix+"active"),this.dropdown&&this.dropdown.conceal(),this.fireEvent("hide"),this},c.show=function(){return this.element.addClass(Toolkit.options.isPrefix+"active"),this.dropdown&&this.dropdown.reveal(),this.fireEvent("show"),this},c.__change=function(b){var c=a(b.target),d=c.find("option"),e=[],f=[],g=this;if(d.each(function(){this.selected&&(e.push(this),f.push(g.readValue(this,g.options.getOptionLabel)||this.textContent))}),this.multiple){var h=this.readValue(c,this.options.getDefaultLabel),i=this.options.multipleFormat,j=f.length;if(!f.length&&h)f=h;else if("count"===i)f=this.options.countMessage.replace("{count}",j).replace("{total}",d.length);else if("list"===i){var k=this.options.listLimit;f=f.splice(0,k).join(", "),j>k&&(f+=" ...")}}else f=f.join(", ");c.parent().find("."+Toolkit.options.vendor+"select-label").text(f),this.fireEvent("change",[c.get("value"),e])},c.__cycle=function(b){if(this.dropdown.is(":shown")&&a.inArray(b.keyCode,[38,40,13,27])>=0){b.preventDefault();var c=this.input.find("option"),d=this.dropdown.find("a"),e=Toolkit.options.isPrefix+"active",f=this.currentIndex;switch(b.keyCode){case 13:case 27:return this.hide(),void 0;case 38:for(f--,0>f&&(f=c.length-1);c[f].disabled;)f--,0>f&&(f=c.length-1);break;case 40:for(f++,f>=c.length&&(f=0);c[f].disabled;)f++,f>=c.length&&(f=0)}c.prop("selected",!1),c[f].selected=!0,d.parent().removeClass(e),d.item(f).parent().addClass(e),this.currentIndex=f,this.input.change()}},c.__toggle=function(){this.enabled&&!this.input.prop("disabled")&&(this.dropdown.is(":shown")?this.hide():this.show())},a.fn.input=function(a){return this.each(function(){new Toolkit.Input(this,a)})},a.fn.radio=function(b){return this.each(function(){a(this).addData("toolkit.input.radio",function(){return new Toolkit.Input.Radio(this,b)})})},a.fn.checkbox=function(b){return this.each(function(){a(this).addData("toolkit.input.checkbox",function(){return new Toolkit.Input.Checkbox(this,b)})})},a.fn.select=function(b){return this.each(function(){a(this).addData("toolkit.input.select",function(){return new Toolkit.Input.Select(this,b)})})}}(jQuery);!function(a){"use strict";Toolkit.LazyLoad=Toolkit.Component.create(function(a,b){this.component="LazyLoad",this.version="0.0.0",this.options=this.setOptions(Toolkit.LazyLoad.options,b),this.elements=this.setElement(a,this.options),this.isLoaded=!1,this.loaded=0,this.initialize()}),Toolkit.LazyLoad.options={forceLoad:!1,delay:1e4,threshold:150,throttle:50,context:null};var b=Toolkit.LazyLoad.prototype;b.initialize=function(){a(this.options.context||window).on({scroll:a.throttle(this.load.bind(this),this.options.throttle),resize:a.throttle(this.load.bind(this),this.options.throttle)}),a(function(){this.load(),this.options.forceLoad&&window.setTimeout(this.loadAll.bind(this),this.options.delay)}.bind(this)),this.fireEvent("init")},b.inViewport=function(b){var c=a(window),d=this.options.threshold,e=c.scrollTop(),f=c.scrollLeft(),g=a(b).offset();return g.top>=e-d&&g.top<=e+c.height()+d&&g.left>=f-d&&g.left<=f+c.width()+d},b.load=function(){return this.isLoaded?!1:this.loaded===this.elements.length?(this.shutdown(),!1):(this.elements.each(function(a,b){b&&this.inViewport(b)&&this.show(b,a)}.bind(this)),this.fireEvent("load"),!0)},b.loadAll=function(){return this.isLoaded?!1:(this.elements.each(function(a,b){this.show(b,a)}.bind(this)),this.fireEvent("loadAll"),this.shutdown(),!0)},b.show=function(b,c){return b=a(b),b.removeClass(this.elements.selector.substr(1)),b.find("img").each(function(){var b=a(this),c=b.data("lazyload");c&&b.attr("src",c)}),this.elements.splice(c,1,null),this.loaded++,this.fireEvent("show",b),this},b.shutdown=function(){return this.isLoaded=!0,a(this.options.context||window).off({scroll:this.load.bind(this),resize:this.load.bind(this)}),this.fireEvent("shutdown"),this},a.fn.lazyLoad=function(b){var c=new Toolkit.LazyLoad(this,b);return this.each(function(){a(this).addData("toolkit.lazyload",c)})}}(jQuery);!function(a){"use strict";Toolkit.Mask=Toolkit.Component.create(function(a,b){this.component="Mask",this.version="0.0.0",this.options=this.setOptions(Toolkit.Mask.options,b),this.element=this.setElement(a,this.options),this.mask=null,this.message=null,this.initialize()}),Toolkit.Mask.options={revealOnClick:!1,messageContent:"",messageElement:".mask-message"};var b=Toolkit.Mask.prototype;b.initialize=function(){var b=this.element,c=Toolkit.options.vendor,d=c+"mask";b.is("body")||(b.addClass(c+"maskable"),"static"===b.css("position")&&b.css("position","relative"));var e=b.find("> ."+d);e.length||(e=a("<div/>").addClass(d)),this.setMask(e),this.fireEvent("init")},b.hide=function(){return this.mask.conceal(),this.element.removeClass(Toolkit.options.isPrefix+"masked"),this.fireEvent("hide"),this},b.setMask=function(b){var c=this.options;return b.addClass("hide").appendTo(this.element),this.element.is("body")&&b.css("position","fixed"),c.revealOnClick&&b.click(this.hide.bind(this)),this.mask=b,this.message=b.find("> "+c.messageElement),this.message.length||(this.message=a("<div/>").addClass(c.messageElement.substr(1)).appendTo(b),c.messageContent&&this.message.html(c.messageContent)),this},b.show=function(a){return this.enabled?(this.node=a,this.mask.reveal(),this.element.addClass(Toolkit.options.isPrefix+"masked"),this.fireEvent("show"),this):this},b.toggle=function(){return this.mask.is(":shown")?this.hide():this.show()},a.fn.mask=function(b){return this.each(function(){a(this).addData("toolkit.mask",function(){return new Toolkit.Mask(this,b)})})}}(jQuery);!function(a){"use strict";Toolkit.Matrix=Toolkit.Component.create(function(a,b){this.component="Matrix",this.version="0.0.0",this.options=this.setOptions(Toolkit.Matrix.options,b),this.element=this.setElement(a,this.options),this.items=[],this.matrix=[],this.wrapperWidth=0,this.colWidth=0,this.colCount=0,this.images=[],this.imagesLoaded=0,this.initialize()}),Toolkit.Matrix.options={className:"",selector:".matrix-item",width:200,gutter:20,rtl:!1,defer:!0,template:!1};var b=Toolkit.Matrix.prototype;b.initialize=function(){this.element.addClass(Toolkit.options.vendor+"matrix"),this.items=this.element.find(this.options.selector),a(window).on("resize",a.debounce(this.__resize.bind(this))),this.fireEvent("init"),this.options.defer?this._deferRender():this.render()},b.append=function(b){return a(b).addClass(Toolkit.options.vendor+"matrix-item").appendTo(this.element).css("opacity",0),this.refresh()},b.disable=function(){return this.enabled=!1,this.element.removeAttr("style"),this.items.removeClass(Toolkit.options.vendor+"matrix-item").removeAttr("style"),this},b.enable=function(){return this.enabled=!0,this.items.addClass(Toolkit.options.vendor+"matrix-item"),this},b.prepend=function(b){return a(b).addClass(Toolkit.options.vendor+"matrix-item").prependTo(this.element).css("opacity",0),this.refresh()},b.refresh=function(){return this.items=this.element.find(this.options.selector),this.render()},b.remove=function(b){return b=a(b).get(0),this.items.each(function(){var c=a(this);return c.get(0)===b?(c.remove(),!1):!0}),this.refresh()},b.render=function(){return this._calculateColumns(),this.items.length<this.colCount?this.disable():(this.enable(),this.colCount<=1?(this.element.addClass("no-columns"),this.items.removeAttr("style")):(this.element.removeClass("no-columns"),this._organizeItems(),this._positionItems()),this.fireEvent("render"),this)},b._calculateColumns=function(){var a,b=this.element.outerWidth(),c=this.options.width,d=this.options.gutter,e=Math.max(Math.floor(b/c),1),f=e*(c+d)-d;return e>1&&(f>b?(a=f-b,c-=a/e):b>f&&(a=b-f,c+=a/e)),this.wrapperWidth=b,this.colWidth=c,this.colCount=e,this},b._deferRender=function(){return this.imagesLoaded=0,this.images=this.element.find("img"),this.images.length?this.images.each(function(a,b){var c=b.src;b.onload=this.__load.bind(this),b.onerror=this.__load.bind(this),b.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",b.src=c}.bind(this)):this.render(),this},b._organizeItems=function(){var a,b,c,d=0,e=this.items.length;this.matrix=[];for(var f=0;e>f;f++){if(a=this.items.item(f),c=a.outerWidth(),b=Math.max(Math.round(c/this.colWidth),1),this.matrix.push({item:a,span:b}),b>1)for(var g=1;b>g;g++)d++,this.matrix&&this.matrix.push({item:a,span:!1});d++,d>=this.colCount&&(d=0)}return this},b._positionItems=function(){var a,b,c,d,e,f,g=this.options.gutter,h=this.matrix,i=this.options.rtl?"right":"left",j=0,k=[],l=0,m={margin:0,position:"absolute"};for(d=0;d<this.colCount;d++)k.push(0);for(d=0,e=h.length;e>d;d++){if(a=h[d],b=a.span,(l>=this.colCount||b+l>this.colCount)&&(l=0,j=0),b){for(c=0,f=0;b>f;f++)k[l+f]>c&&(c=k[l+f]);for(m.top=c,m[i]=j,m.width=(this.colWidth+g)*b-g,a.item.css(m).reveal(),f=0;b>f;f++)k[l+f]=a.item.outerHeight()+g+c}j+=this.colWidth+g,l++}return this.element.css("height",Math.max.apply(Math,k)),this},b.__load=function(a){(!a||"load"===a.type&&a.target.complete||"error"===a.type&&!a.target.complete)&&this.imagesLoaded++,this.imagesLoaded===this.images.length&&this.render()},b.__resize=function(){this.element.hasClass(Toolkit.options.vendor+"matrix")&&this.refresh()},a.fn.matrix=function(b){return this.each(function(){a(this).addData("toolkit.matrix",function(){return new Toolkit.Matrix(this,b)})})}}(jQuery);!function(a){"use strict";Toolkit.Modal=Toolkit.Component.create(function(b,c){this.component="Modal",this.version="0.0.0",this.options=this.setOptions(Toolkit.Modal.options,c),this.nodes=a(b),this.node=null,this.element=this.createElement(this.options),this.elementBody=null,this.blackout=null,this.drag=null,this.cache={},this.initialize()}),Toolkit.Modal.options={animation:"fade",className:"",context:null,ajax:!0,draggable:!1,blackout:!0,fullScreen:!1,getContent:"data-modal",contentElement:".modal-inner",closeElement:".modal-close",closeEvent:".modal-event-close",submitEvent:".modal-event-submit",template:'<div class="modal"><div class="modal-handle"><div class="modal-inner"></div><a href="javascript:;" class="modal-close modal-event-close"><span class="x"></span></a></div></div>'};var b=Toolkit.Modal.prototype;b.initialize=function(){var b=this.options;if(b.fullScreen&&(this.element.addClass(Toolkit.options.isPrefix+"fullscreen"),b.draggable=!1),this.elementBody=this.element.find(b.contentElement),b.draggable&&a.ui&&a.ui.draggable){var c=Toolkit.options.isPrefix;this.drag=this.element.draggable({appendTo:"body",containment:"window",cursor:"grabbing",start:function(a,b){b.helper.addClass(c+"dragging")},stop:function(a,b){b.helper.removeClass(c+"dragging")}}),this.element.addClass(c+"draggable")}b.blackout&&(this.blackout=Toolkit.Blackout.factory(),this.blackout.element.click(this.__hide.bind(this))),this.element.clickout(this.__hide.bind(this)),this.nodes.clickout(this.__hide.bind(this)),a(b.context||document).on("click",this.nodes.selector,this.__show.bind(this)),a(window).on("keydown",function(a){27===a.keyCode&&this.element.is(":shown")&&this.hide()}.bind(this)),this.element.on("click",b.closeEvent,this.__hide.bind(this)).on("click",b.submitEvent,this.__submit.bind(this)),this.fireEvent("init")},b.hide=function(){return this.element.conceal(),this.blackout&&this.blackout.hide(),this.fireEvent("hide"),this},b.position=function(b){return b===!0?this:(this.elementBody.html(b),this.fireEvent("load",b),this.blackout&&this.blackout.hideLoader(),this.element.reveal(),this.options.fullScreen?this.element.find(this.options.contentElement).css("min-height",a(window).height()):Toolkit.ie8&&this.element.css({"margin-left":-(this.element.outerWidth(!0)/2),"margin-top":-(this.element.outerHeight(!0)/2)}),this.fireEvent("show"),this)},b.show=function(b,c){b=a(b);var d=this.options,e=d.ajax;return c?e=!1:b&&(c=this.readValue(b,d.getContent)||b.attr("href"),c&&c.match(/^#[a-z0-9_\-\.:]+$/i)&&(c=a(c).html(),e=!1)),c?(this.node=b,this.blackout&&this.blackout.show(),e?this.cache[c]?this.position(this.cache[c]):this.requestData(c):this.position(c),this):this},b.__hide=function(a){a.preventDefault(),this.hide()},b.__show=function(a){a.preventDefault(),this.enabled&&this.show(a.currentTarget)},b.__submit=function(b){b.preventDefault();var c=a(b.target),d=this.elementBody.find("form:first");if(d){this.fireEvent("submit",[c,d]);var e={url:d.attr("action"),type:(d.attr("method")||"post").toUpperCase()};window.FormData?(e.processData=!1,e.contentType=!1,e.data=new FormData(d[0])):e.data=d.serialize(),this.requestData(e)}},a.fn.modal=function(b){var c=new Toolkit.Modal(this,b);return this.each(function(){a(this).addData("toolkit.modal",c)})}}(jQuery);!function(a){"use strict";Toolkit.Pin=Toolkit.Component.create(function(a,b){this.component="Pin",this.version="0.0.0",this.options=this.setOptions(Toolkit.Pin.options,b),this.element=this.setElement(a,this.options),this.viewport=null,this.elementHeight=null,this.elementTop=null,this.parentHeight=null,this.parentTop=null,this.initialize()}),Toolkit.Pin.options={animation:"",location:"right",xOffset:0,yOffset:0,throttle:50,fixed:!1,calculate:!1,context:null};var b=Toolkit.Pin.prototype;b.initialize=function(){this.element.addClass(Toolkit.options.vendor+"pin"),this.elementTop=parseInt(this.element.css("top"),10),a(window).on("scroll",a.throttle(this.__scroll.bind(this),this.options.throttle)),a(window).on("resize",a.throttle(this.__resize.bind(this),this.options.throttle)),a(document).ready(this.__resize.bind(this)),this.fireEvent("init")},b.calculate=function(){var b=a(window),c=this.element.parents(this.options.context);return this.viewport={width:b.width(),height:b.height()},this.elementHeight=this.element.outerHeight(),this.parentHeight=c.outerHeight(),this.parentTop=c.offset().top,this},b.__resize=function(){this.calculate(),this.parentHeight>=this.elementHeight?this.enable():this.disable(),this.fireEvent("resize")},b.__scroll=function(){if(this.options.calculate&&this.calculate(),this.enabled&&!this.element.is(":hidden")){var b=this.options,c=b.fixed,d=this.elementHeight,e=this.elementTop,f=this.parentHeight,g=this.parentTop,h=a(window).scrollTop(),i={},j=b.xOffset,k=0;if(g>h)return this.element.removeAttr("style").addClass(Toolkit.options.isPrefix+"pinned"),void 0;var l=h+d,m=f+g;c?l>=m?(k="auto",i.position="absolute",i.bottom=0):(i.position="fixed",i.bottom="auto"):(i.position="absolute",k+=l>=m?f-d:h-g+b.yOffset,e&&e>k&&(k=e)),i[b.location]=j,i.top=k,this.element.css(i).addClass(Toolkit.options.isPrefix+"pinned"),this.fireEvent("scroll")}},a.fn.pin=function(b){return this.each(function(){a(this).addData("toolkit.pin",function(){return new Toolkit.Pin(this,b)})})}}(jQuery);!function(a){"use strict";Toolkit.Tooltip=Toolkit.Component.create(function(b,c){this.component="Tooltip",this.version="0.0.0",this.options=this.setOptions(Toolkit.Tooltip.options,c),this.nodes=a(b),this.node=null,this.element=this.createElement(this.options),this.elementHead=null,this.elementBody=null,this.cache={},this.initialize()}),Toolkit.Tooltip.options={mode:"hover",ajax:!1,follow:!1,position:"topCenter",loadingMessage:Toolkit.messages.loading,showLoading:!0,showTitle:!0,getTitle:"title",getContent:"data-tooltip",mouseThrottle:50,xOffset:0,yOffset:0,delay:0,titleElement:".tooltip-head",contentElement:".tooltip-body",template:'<div class="tooltip"><div class="tooltip-inner"><div class="tooltip-head"></div><div class="tooltip-body"></div></div><div class="tooltip-arrow"></div></div>'};var b=Toolkit.Tooltip.prototype;b.initialize=function(){var b=this.options;this.elementHead=this.element.find(b.titleElement),this.elementBody=this.element.find(b.contentElement),this.element.addClass(b.position.hyphenate()),a(b.context||document).on("click"===b.mode?"click":"mouseover",this.nodes.selector,this.__show.bind(this)),"click"===b.mode&&this.element.clickout(this.hide.bind(this)),this.fireEvent("init")},b.hide=function(){return this.element.conceal(),this.fireEvent("hide"),this},b.position=function(a,b){var c=this.options;if(a===!0)return this;if(b&&c.showTitle?this.elementHead.html(b).show():this.elementHead.hide(),a?this.elementBody.html(a).show():this.elementBody.hide(),this.fireEvent("load",a),c.follow){var d=this.__follow.bind(this);this.node.off("mousemove",d).on("mousemove",d),this.fireEvent("show")}else this.element.positionTo(c.position,this.node,{left:c.xOffset,top:c.yOffset}),window.setTimeout(function(){this.element.reveal(),this.fireEvent("show")}.bind(this),c.delay||0);return this},b.show=function(b,c,d){var e=this.options;return b&&(b=a(b),"hover"===e.mode&&b.off("mouseleave",this.hide.bind(this)).on("mouseleave",this.hide.bind(this)),d=d||this.readValue(b,e.getTitle),c=c||this.readValue(b,e.getContent)),c?(this.node=b,e.ajax?this.cache[c]?this.position(this.cache[c],d):(e.showLoading&&this.position(e.loadingMessage),this.requestData(c)):(c.match(/^#[a-z0-9_\-\.:]+$/i)&&(c=a(c).html()),this.position(c,d)),this):this},b.__follow=function(a){a.preventDefault();var b=this.options;this.element.positionTo(b.position,a,{left:b.xOffset,top:b.yOffset},!0).reveal()},b.__show=function(b){var c=a(b.target),d=this.node&&c[0]===this.node[0];if(this.element.is(":shown")){if(Toolkit.isTouch?d&&"a"===this.node.prop("tagName").toLowerCase()||b.preventDefault():b.preventDefault(),"click"===this.options.mode&&this.hide(),d)return}else b.preventDefault();this.show(c)},a.fn.tooltip=function(b){var c=new Toolkit.Tooltip(this,b);return this.each(function(){a(this).addData("toolkit.tooltip",c)})}}(jQuery);!function(a){"use strict";Toolkit.Popover=Toolkit.Tooltip.create(function(b,c){this.component="Popover",this.version="0.0.0",this.options=this.setOptions(Toolkit.Popover.options,c),this.nodes=a(b),this.element=this.createElement(this.options),this.elementHead=null,this.elementBody=null,this.cache={},this.initialize()}),Toolkit.Popover.options={mode:"click",ajax:!1,position:"topCenter",showLoading:!0,showTitle:!0,getTitle:"title",getContent:"data-popover",xOffset:0,yOffset:0,delay:0,titleElement:".popover-head",contentElement:".popover-body",template:'<div class="popover"><div class="popover-inner"><div class="popover-head"></div><div class="popover-body"></div></div><div class="popover-arrow"></div></div>'},a.fn.popover=function(b){var c=new Toolkit.Popover(this,b);return this.each(function(){a(this).addData("toolkit.popover",c)})}}(jQuery);!function(a){"use strict";Toolkit.Showcase=Toolkit.Component.create(function(b,c){this.component="Showcase",this.version="0.0.0",this.options=this.setOptions(Toolkit.Showcase.options,c),this.nodes=a(b),this.element=this.createElement(this.options),this.items=null,this.tabs=null,this.prevButton=null,this.nextButton=null,this.data=[],this.previousIndex=0,this.currentIndex=0,this.blackout=null,this.initialize()}),Toolkit.Showcase.options={className:"",blackout:!0,transition:300,gutter:50,getCategory:"data-showcase",getImage:"href",getTitle:"title",itemsElement:".showcase-items",tabsElement:".showcase-tabs",prevElement:".showcase-prev",nextElement:".showcase-next",closeEvent:".showcase-event-close",jumpEvent:".showcase-event-jump",prevEvent:".showcase-event-prev",nextEvent:".showcase-event-next",template:'<div class="showcase"><div class="showcase-inner"><ul class="showcase-items"></ul><ol class="showcase-tabs bullets"></ol><a href="javascript:;" class="showcase-prev showcase-event-prev"><span class="arrow-left"></span></a><a href="javascript:;" class="showcase-next showcase-event-next"><span class="arrow-right"></span></a><a href="javascript:;" class="showcase-close showcase-event-close"><span class="x"></span></a></div></div>'};var b=Toolkit.Showcase.prototype;b.initialize=function(){var b=this.options;(Toolkit.ie8||Toolkit.ie9)&&(this.options.transition=1),this.items=this.element.find(b.itemsElement),this.tabs=this.element.find(b.tabsElement),this.prevButton=this.element.find(b.prevElement),this.nextButton=this.element.find(b.nextElement),b.blackout&&(this.blackout=Toolkit.Blackout.factory()),this.element.clickout(this.hide.bind(this)),this.nodes.clickout(this.hide.bind(this)),a(b.context||document).on("click",this.nodes.selector,this.__show.bind(this)),a(window).on("keydown",function(b){if(this.element.is(":shown"))switch(a.inArray(b.keyCode,[37,38,39,40])>=0&&b.preventDefault(),b.keyCode){case 27:this.hide();break;case 37:this.prev();break;case 38:this.jump(0);break;case 39:this.next();break;case 40:this.jump(-1)}}.bind(this)),this.element.on("click",b.closeEvent,this.hide.bind(this)).on("click swipeleft",b.nextEvent,this.next.bind(this)).on("click swiperight",b.prevEvent,this.prev.bind(this)).on("click",b.jumpEvent,this.__jump.bind(this)),this.fireEvent("init")},b.hide=function(){return this.blackout&&this.blackout.hide(),this.element.is(":shown")&&(this.element.conceal(),this.element.removeClass(Toolkit.options.isPrefix+"single"),this.items.removeAttr("style").children("li").removeClass("show"),this.fireEvent("hide")),this},b.jump=function(b){b>=this.data.length?b=0:0>b&&(b=this.data.length-1);var c=this,d=this.options,e=this.element,f=this.items,g=f.children("li"),h=g.item(b),i=this.data,j=i[b];if(this.previousIndex=this.currentIndex,this.currentIndex=b,this.tabs){var k=this.tabs.find("a");k.removeClass(Toolkit.options.isPrefix+"active").item(b).addClass(Toolkit.options.isPrefix+"active")}if(g.removeClass("show"),h.data("width"))this._resize(h.data("width"),h.data("height")),setTimeout(function(){h.addClass("show"),c.position()},d.transition);else{e.addClass(Toolkit.options.isPrefix+"loading");var l=new Image;l.src=j.image,l.onload=function(){c._resize(this.width,this.height),h.data("width",this.width).data("height",this.height),j.title&&h.append(a("<div/>").addClass(Toolkit.options.vendor+"showcase-caption").html(j.title)),setTimeout(function(){e.removeClass(Toolkit.options.isPrefix+"loading"),h.addClass("show").append(l),c.position()},d.transition)}}return this.fireEvent("jump",b),this},b.next=function(){return this.jump(this.currentIndex+1),this},b.position=function(){return this.blackout&&this.blackout.hideLoader(),this.element.reveal(),Toolkit.ie8&&this.element.css({"margin-left":-(this.element.outerWidth(!0)/2),"margin-top":-(this.element.outerHeight(!0)/2)}),this.fireEvent("show"),this},b.prev=function(){return this.jump(this.currentIndex-1),this},b.show=function(b){this.node=b=a(b),this.currentIndex=this.previousIndex=0,this.element.addClass(Toolkit.options.isPrefix+"loading");var c=this.options,d=this.readValue.bind(this),e=d(b,c.getCategory),f=[],g=0;if(e)for(var h,i=0,j=0;h=this.nodes[i];i++)d(h,c.getCategory)===e&&(h===b&&(g=j),f.push({title:d(h,c.getTitle),category:e,image:d(h,c.getImage)}),j++);else f.push({title:d(b,c.getTitle),category:e,image:d(b,c.getImage)});return this.blackout&&this.blackout.show(),this._buildItems(f),this.jump(g),this},b._buildItems=function(b){this.data=b,this.items.empty(),this.tabs.empty();for(var c,d,e,f=0;e=b[f];f++)c=a("<li/>"),c.appendTo(this.items),d=a("<a/>").addClass(this.options.jumpEvent.substr(1)).attr("href","javascript:;").data("index",f),c=a("<li/>"),c.appendTo(this.tabs).append(d);return b.length<=1&&this.element.addClass(Toolkit.options.isPrefix+"single"),this.fireEvent("load",b),this},b._resize=function(b,c){var d,e,f=a(window).width(),g=a(window).height();if(b>f){var h=f-2*this.options.gutter;d=b/c,e=b-h,b=h,c-=Math.round(e/d)}else if(c>g){var i=g-2*this.options.gutter;d=c/b,e=c-i,b-=Math.round(e/d),c=i}return this.items.css({width:b,height:c}),this},b.__jump=function(b){b.preventDefault(),this.jump(a(b.target).data("index")||0)},b.__show=function(a){a.preventDefault(),this.show(a.currentTarget)},a.fn.showcase=function(b){var c=new Toolkit.Showcase(this,b);return this.each(function(){a(this).addData("toolkit.showcase",c)})}}(jQuery);!function(a){"use strict";Toolkit.Stalker=Toolkit.Component.create(function(a,b){this.component="Stalker",this.version="0.0.0",this.options=this.setOptions(Toolkit.Stalker.options,b),this.element=this.setElement(a,this.options),this.target=null,this.targets=[],this.marker=null,this.markers=[],this.offsets=[],this.container=null,this.initialize()}),Toolkit.Stalker.options={target:"",marker:"",threshold:50,throttle:50,onlyWithin:!0,applyToParent:!0};var b=Toolkit.Stalker.prototype;b.initialize=function(){this.options.target&&this.options.marker&&(this.element.addClass(Toolkit.options.vendor+"stalker"),this.container="auto"===this.element.css("overflow")?this.element:a(window),this.refresh(),this.container.on("scroll",a.throttle(this.__scroll.bind(this),this.options.throttle)),a(document).ready(this.__scroll.bind(this)),this.fireEvent("init"))},b.activate=function(b,c){this.marker=a(b),this.target=c=a(c);var d=this.targets;return this.options.applyToParent?(d.parent().removeClass(Toolkit.options.isPrefix+"active"),c.parent().addClass(Toolkit.options.isPrefix+"active")):(d.removeClass(Toolkit.options.isPrefix+"active"),c.addClass(Toolkit.options.isPrefix+"active")),this.fireEvent("activate",[b,c]),this},b.deactivate=function(a){var b=this.targets;return this.options.applyToParent?b.parent().removeClass(Toolkit.options.isPrefix+"active"):b.removeClass(Toolkit.options.isPrefix+"active"),this.marker=null,this.target=null,this.fireEvent("deactivate",a),this},b.refresh=function(){"auto"!==this.element.css("overflow")||this.element.is("body")||(this.element[0].scrollTop=0),this.target=null,this.targets=a(this.options.target),this.targets.addClass(Toolkit.options.vendor+"stalker-target"),this.marker=null,this.markers=a(this.options.marker),this.markers.addClass(Toolkit.options.vendor+"stalker-marker");var b,c=this.container.is(window),d=this.element.offset().top,e=[];return this.markers.each(function(f,g){g=a(g),b=g.offset(),c||(b.top-=d),e.push(b)}),this.offsets=e,this},b.__scroll=function(){if(this.enabled){var b=this.container.scrollTop(),c=this.markers,d=this.targets,e=this.offsets,f=this.options.onlyWithin,g=this.options.threshold;c.each(function(c,h){h=a(h);var i=e[c],j=i.top-g,k=i.top+h.height()+g,l=[];f&&b>=j&&k>=b||!f&&b>=j?(l=d.filter(function(){return a(this).attr("href")==="#"+h.attr("id")}),l.length&&this.activate(h,l.item(0))):this.marker&&this.marker.is(h)&&this.deactivate(h)}.bind(this)),this.fireEvent("scroll")}},a.fn.stalker=function(b){return this.each(function(){a(this).addData("toolkit.stalker",function(){return new Toolkit.Stalker(this,b)})})}}(jQuery);!function(a){"use strict";Toolkit.Tabs=Toolkit.Component.create(function(a,b){this.component="Tabs",this.version="0.0.0",this.options=this.setOptions(Toolkit.Tabs.options,b),this.element=this.setElement(a,this.options),this.nav=null,this.sections=[],this.tabs=[],this.previousIndex=0,this.currentIndex=0,this.cache={},this.initialize()}),Toolkit.Tabs.options={mode:"click",ajax:!0,collapsible:!1,defaultIndex:0,persistState:!1,preventDefault:!0,loadFragment:!0,cookie:null,cookieDuration:30,getUrl:"href",navElement:".tabs-nav",sectionsElement:".tabs-section"};var b=Toolkit.Tabs.prototype;b.initialize=function(){var b=this.options;b.cookie||(this.options.cookie=b.cookie=this.element.attr("id")),this.nav=this.element.find(b.navElement),this.tabs=this.nav.find("ul > li > a"),this.tabs.each(function(b){a(this).data("index",b).removeClass(Toolkit.options.isPrefix+"active")}),this.sections=this.element.find(b.sectionsElement),this.sections.conceal(),this.tabs.on("click"===b.mode?"click":"mouseover",this.__show.bind(this)),"hover"===b.mode&&b.preventDefault&&this.tabs.on("click",function(a){a.preventDefault()}),this.fireEvent("init");var c=b.defaultIndex;if(b.persistState){var d="toolkit.tabs."+b.cookie,e=document.cookie.match("(?:^|;)\\s*"+d.replace(/[\-\.\+\*]/g,"\\$&")+"=([^;]*)");e&&e.length&&(c=decodeURIComponent(e[1]))}else if(b.loadFragment&&location.hash){var f=this.tabs.filter(function(){return a(this).attr("href")===location.hash});f.length&&(c=f.item(0).data("index"))}this.tabs[c]||(c=0),this.jump(c)},b.hide=function(){return this.sections.conceal(),this.fireEvent("hide",this.node),this},b.jump=function(a){return this.tabs[a]&&this.show(this.tabs[a]),this},b.show=function(b){b=a(b);var c=b.data("index"),d=this.sections.item(c),e=this.readValue(b,this.options.getUrl);if(this.options.ajax&&e&&"#"!==e.substr(0,1)&&!this.cache[e]&&this.requestData(e,function(){d.html(this._loadingTemplate()).addClass(Toolkit.options.isPrefix+"loading")},function(a){this.cache[e]=!0,d.html(a).removeClass(Toolkit.options.isPrefix+"loading"),this.fireEvent("load",a)},function(){d.html(this._errorTemplate()).removeClass(Toolkit.options.isPrefix+"loading").addClass(Toolkit.options.hasPrefix+"failed")}),this.nav.find("ul > li").removeClass(Toolkit.options.isPrefix+"active"),c===this.currentIndex&&this.options.collapsible?d.is(":shown")?d.conceal():(b.parent().addClass(Toolkit.options.isPrefix+"active"),d.reveal()):(this.hide(),b.parent().addClass(Toolkit.options.isPrefix+"active"),d.reveal()),this.options.persistState){var f="toolkit.tabs."+this.options.cookie+"="+encodeURIComponent(c),g=new Date;g.setTime(g.getTime()+1e3*60*60*24*this.options.cookieDuration),f+="; expires="+g.toUTCString(),f+="; path=/",document.cookie=f}return this.previousIndex=this.currentIndex,this.currentIndex=c,this.fireEvent("show",b),this.node=b,this},b.__show=function(b){(this.options.preventDefault||this.options.ajax&&"#"!==a(b.target).attr("href").substr(0,1))&&b.preventDefault(),this.enabled&&this.show(b.target)},a.fn.tabs=function(b){return this.each(function(){a(this).addData("toolkit.tabs",function(){return new Toolkit.Tabs(this,b)})})}}(jQuery);!function(a){"use strict";Toolkit.TypeAhead=Toolkit.Component.create(function(b,c){this.component="TypeAhead",this.version="0.0.0",this.options=this.setOptions(Toolkit.TypeAhead.options,c),this.element=this.createElement(this.options),this.input=a(b),this.shadow=null,this.index=-1,this.items=[],this.term="",this.timer=null,this.cache={},this.initialize()}),Toolkit.TypeAhead.options={className:"",source:[],minLength:1,itemLimit:15,throttle:250,prefetch:!1,shadow:!1,storage:"session",query:{},contentElement:"",template:'<div class="type-ahead"></div>',sorter:null,matcher:null,builder:null};var b=Toolkit.TypeAhead.prototype;b.initialize=function(){if("input"!==this.input.prop("tagName").toLowerCase())throw new Error("TypeAhead must be initialized on an input field");this.input.attr("autocomplete","off");var b=this.options;if(a.each({sorter:"sort",matcher:"match",builder:"build"},function(c,d){if(b[c]!==!1){var e;e=null===b[c]||"function"!==a.type(b[c])?this[d]:b[c],this.options[c]=e.bind(this)}}.bind(this)),b.prefetch&&"string"===a.type(b.source)){var c=b.source;a.getJSON(c,b.query,function(a){this.cache[c]=a}.bind(this))}b.shadow&&(this.wrapper=a("<div/>").addClass(Toolkit.options.vendor+"type-ahead-shadow"),this.shadow=this.input.clone().addClass(Toolkit.options.isPrefix+"shadow").removeAttr("id").prop("readonly",!0),this.input.addClass("not-shadow").replaceWith(this.wrapper),this.wrapper.append(this.input).append(this.shadow)),this.input.on({keyup:this.__lookup.bind(this),keydown:this.__cycle.bind(this)}),a(window).on("keydown",function(a){27===a.keyCode&&this.element.is(":shown")&&this.hide()}.bind(this)),this.element.clickout(this.hide.bind(this)),this.fireEvent("init")},b.build=function(b){var c=a("<a/>",{href:"javascript:;"});return c.append(a("<span/>",{"class":Toolkit.options.vendor+"type-ahead-title",html:this.highlight(b.title)})),b.description&&c.append(a("<span/>",{"class":Toolkit.options.vendor+"type-ahead-desc",html:b.description})),c},b.hide=function(){return this.shadow&&this.shadow.val(""),this.element.is(":shown")&&(this.element.conceal(),this.fireEvent("hide")),this},b.highlight=function(a){for(var b,c=this.term.replace(/[\-\[\]\{\}()*+?.,\\^$|#]/g,"\\$&").split(" "),d=function(a){return'<span class="'+Toolkit.options.vendor+'type-ahead-highlight">'+a+"</span>"},e=0;b=c[e];e++)a=a.replace(new RegExp(b,"ig"),d);return a},b.lookup=function(b){return this.term=b,this.timer=window.setTimeout(function(){var c=this.options,d=a.type(c.source);if(this.cache[b.toLowerCase()])this.process(this.cache[b.toLowerCase()]);else if("string"===d){var e=c.source,f=this.cache[e];if(f)this.process(f);else{var g=c.query;g.term=b,a.getJSON(e,g,this.process.bind(this))}}else if("array"===d)this.process(c.source);else{if("function"!==d)throw new Error("Invalid TypeAhead source type");var h=c.source.call(this);h&&this.process(h)}}.bind(this),this.options.throttle),this},b.match=function(a,b){return a.toLowerCase().indexOf(b.toLowerCase())>=0},b.position=function(){if(!this.items.length)return this.hide();var a=this.input.offset();return this.element.css({left:a.left,top:a.top+this.input.outerHeight()}).reveal(),this},b.process=function(b){if(!this.term.length||!b.length)return this.hide(),this;var c,d=this.options,e={_empty_:[]},f=a("<ul/>");this.items=[],this.index=-1,"function"===a.type(d.sorter)&&(b=d.sorter(b)),"function"===a.type(d.matcher)&&(b=b.filter(function(a){return d.matcher(a.title,this.term)}.bind(this)));for(var g=0;c=b[g];g++)c.category?(e[c.category]||(e[c.category]=[]),e[c.category].push(c)):e._empty_.push(c);var h=[],i=0;return a.each(e,function(b,e){var g=[];"_empty_"!==b&&(h.push(null),g.push(a("<li/>").addClass(Toolkit.options.vendor+"type-ahead-heading").append(a("<span/>",{text:b}))));for(var j,k=0;(c=e[k])&&!(i>=d.itemLimit);k++)j=d.builder(c),j.on({mouseover:this.rewind.bind(this),click:a.proxy(this.__select,this,h.length)}),g.push(a("<li/>").append(j)),h.push(c),i++;f.append(g)}.bind(this)),this.element.empty(),d.contentElement?this.element.find(d.contentElement).append(f):this.element.append(f),this.items=h,this.cache[this.term.toLowerCase()]=h.filter(function(a){return null!==a}),this.fireEvent("load"),this._shadow(),this.position(),this.fireEvent("show"),this},b.rewind=function(){return this.index=-1,this.element.find("li").removeClass(Toolkit.options.isPrefix+"active"),this},b.select=function(a,b){this.index=a;var c=this.element.find("li");if(c.removeClass(Toolkit.options.isPrefix+"active"),a>=0){if(this.items[a]){var d=this.items[a];c.item(a).addClass(Toolkit.options.isPrefix+"active"),this.input.val(d.title),this.fireEvent(b||"select",[d,a])}}else this.input.val(this.term),this.fireEvent("reset");return this},b.sort=function(a){return a.sort(function(a,b){return a.title.localeCompare(b.title)})},b._shadow=function(){if(this.shadow){var a=this.input.val(),b=a.toLowerCase(),c="";if(this.cache[b]&&this.cache[b][0]){var d=this.cache[b][0].title;0===d.toLowerCase().indexOf(b)&&(c=a+d.substr(a.length,d.length-a.length))}this.shadow.val(c)}},b.__cycle=function(a){var b=this.items,c=Math.min(this.options.itemLimit,Math.max(0,b.length));if(c&&this.element.is(":shown")){switch(a.keyCode){case 38:this.index-=b[this.index-1]?1:2,this.index<0&&(this.index=c);break;case 40:this.index+=b[this.index+1]?1:2,this.index>=c&&(this.index=-1);break;case 9:a.preventDefault();for(var d=0;!this.items[d];)d++;this.index=d,this.hide();break;case 13:this.hide();break;case 27:this.index=-1,this.hide();break;default:return}this.shadow&&this.shadow.val(""),this.select(this.index)}},b.__lookup=function(b){if(!(a.inArray(b.keyCode,[38,40,27,9,13])>=0)){window.clearTimeout(this.timer);var c=this.input.val().trim();c.length<this.options.minLength?(this.fireEvent("reset"),this.hide()):(this._shadow(),this.lookup(c))}},b.__select=function(a){this.select(a),this.hide()},a.fn.typeAhead=function(b){return this.each(function(){a(this).addData("toolkit.typeahead",function(){return new Toolkit.TypeAhead(this,b)})})}}(jQuery);